# 圏

いきなり定義を書こうと思ったけどゴツすぎて若干アレなのでまずは導入の話から…

いろいろな数学の分野において、「考えたい対象が決まっていて、それらの構造を保つような写像のクラスが定まっている」という状況は多い。いくつか見てみよう。

## 集合論
**集合**と、その間の**写像**を考えることは、数学では基本的である。

- 集合は、(数学的な)ものの集まりを表すためのものである。集合の詳細な定式化には触れないことにする(よく知らないので)。具体的には、自然数全体の集合 $\mathbb{N}$, 実数全体の集合 $\mathbb{R}$ などが集合である。合併や共通部分、直積、べき集合など、持っている集合から新しい集合を作る操作もたくさんあるのであった。
- 写像とは、ある集合 $S$ のそれぞれの元を、別の集合 $T$ の元に対応させるようなもののことであった。例えば、自然数 $n \in \mathbb{N}$ に対して、その(正の)平方根 $\sqrt{n} \in \mathbb{R}$ を対応させるような写像を考えることができる。この写像に $f$ という名前を付けることにする。$f$ が $\mathbb{N}$ の元を $\mathbb{R}$ の元に対応させる写像であるということを、
  $$ f: \mathbb{N} \to \mathbb{R} $$
  のように表記する。

写像に関する操作で、圏論において重要なのは**合成**と**恒等写像**である。

### 合成
$S, T, U$ を集合とし、$f: S \to T$, $g: T \to U$ を写像とする。このとき、$f$ と $g$ の合成写像 $g \circ f : S \to U$ は、$x \in S$ に対して
$$ g \circ f (x) := g(f(x))$$
によって定義されるのであった。これはすなわち、$S \to T \to U$ のように写像があれば、それらを続けて適用するという写像が作れるということである。

写像の合成は結合法則を満たす。すなわち、$f: S \to T$, $g: T \to U$, $h: U \to V$ のとき、$(h \circ g) \circ f = h \circ (g \circ f)$ である。

### 恒等写像
$S$ を集合とする。このとき、「$S$ の元に対して、それ自身を対応させる」という写像を考えることができる。この写像を $S$ 上の恒等写像といい、$1_S$ と表すことにする。($\mathrm{id}_S$ とかいろいろな流儀があるかも)

恒等写像と合成しても写像は変化しない。すなわち、$f: S \to T$のとき、$f \circ 1_S = f$, $1_T \circ f = f$ である。

圏の定義は、ここまでで紹介した集合と写像に関する性質を一般化したものである。ここで圏の定義を紹介してもいいが、もう少しほかの分野でどうだったかも見ておこう。

## 線形代数
線形代数では、**線形空間**と**線形写像**が登場する。これらがどのようなものだったかを思い出してみよう。

以下、体 $k$ を固定して、線形空間・線形写像といったらすべて $k$ 上での話とする。

まず、線形空間は、以下のデータにより定まるのであった：

- 集合 $V$
- $V$上の和 $(x, y) \mapsto x+y$
- $V$上のスカラー倍 $(c, x) \mapsto cx$

これらのデータがほにゃほにゃを満たす、というのが線形空間の定義である。（長いので書きません） 線形空間の間の写像 $f: V \to W$ が線形写像であるとは、$f$ がこれらのデータから定まる構造を保つということだった：

- $f(x + y) = f(x) + f(y)$
- $f(cx) = cf(x)$

線形写像も、先ほど見た集合の間の写像と同様に、以下の性質を満たす：

- 恒等写像は線形である。
- 線形写像の合成も線形である。
- 合成は結合法則を満たす。
- 恒等写像との合成は写像を変えない。

## 位相空間
**位相空間**の間の写像としては、**連続写像**を考えるのがよいのであった。

位相空間は、以下のデータにより定まるのであった：

- 集合 $X$
- $X$ 上の開集合全体の集合 $\mathcal{O}$

これらのデータがほにゃほにゃを満たす、というのが位相空間の定義である。（これはそんなに長くないと思うけど、書きません） 位相空間の間の写像 $f: X \to Y$ が連続写像であるとは、任意の $Y$ の開集合 $U$ に対して、 $f^{-1}(U)$ が $X$ の開集合になることであった。これもまた「データから定まる構造を保つ」と思うことができる。

連続写像も、やっぱり以下の性質を満たす：

- 恒等写像は連続である。
- 連続写像の合成も連続である。
- 合成は結合法則を満たす。
- 恒等写像との合成は写像を変えない。

## 圏の定義

ということで、まぁほかにも「群と群準同形」「可測空間と可測写像」「$C^\infty$ 級多様体と$C^\infty$ 級写像」などなど、分野ごとに「考えたい対象といい感じの写像」が登場して、同様の性質を満たす。これらすべてに共通する性質をまとめたものが、以下に紹介する圏の定義である。

!!! definition "定義"
    **圏** (category) $\mathsf{C}$ は、以下のデータから構成される：

    - **対象** (object) と呼ばれるものの集まりが指定されている。
    - **射** (morphism) と呼ばれるものの集まりが指定されている。
    - それぞれの射 $f$ に対して、**ドメイン** (domain, 始域？) と呼ばれる対象 $\mathrm{dom}\, f$ と、**コドメイン** (codomain, 終域？) と呼ばれる対象 $\mathrm{cod}\, f$ が指定されている。
        - $\mathrm{dom}\, f = x$ かつ $\mathrm{cod}\, f = y $ であるとき、$f: x \to y$ のように記すことにする。
    - それぞれの対象 $x$ に対して、**恒等射** (identity morphism) と呼ばれる射 $1_x: x \to x$ が指定されている。
    - ふたつの射 $f$, $g$ であって、$\mathrm{cod}\, f$ と $\mathrm{dom}\, g$ が等しいものに対して、それらの**合成** (composition) $g f: \mathrm{dom}\, f \to \mathrm{cod}\, g$ が指定されている。
        - $f: x \to y$, $g: y \to z$ のとき、$g f: x \to z$ ということ。

    これらのデータは、以下の条件を満たすとする：

    - 任意の $f: x \to y$ に対して、$f 1_x = f$, $1_y f = f$ が成り立つ。
    - 任意の $f: x \to y$, $g: y \to z$, $h: z \to w$ に対して、$(h \circ g) \circ f = h \circ (g \circ f)$ が成り立つ。

- 先ほど紹介したものたちはすべて圏の例である。例えば、集合の圏 $\mathsf{Set}$ は、対象が集合全体、射が写像全体であるような圏である。
- 定義の中で「ものの集まり」と言っているが、集合全体は集合にならないという話なので、この言い方にしている。対象の全体は集合を超えた謎の上位存在になってもよいらしい。そのあたりの正当化については私はよく知らない。

圏 $\mathsf{C}$ において、 $x$ から $y$ への射全体の集まりを、$\mathsf{C}(x, y)$ のように書く。(表記は諸説ありそうで、例えば$\mathrm{Hom}_{\mathsf{C}}(x, y)$と書いている本もある気がする)

また、「$x$ が $\mathsf{C}$ の対象である」ということを、「$x \in \mathsf{C}$」と略記する。

## 圏の例

### 数学の各分野の例
集合と写像など、数学の各分野に現れる圏がある。

- $\mathsf{Set}$：集合を対象とし、写像を射とする圏。
- $\mathsf{Vect}_k$：$k$-線形空間を対象とし、$k$-線形写像を射とする圏。
- $\mathsf{Top}$：位相空間を対象とし、連続写像を射とする圏。
- $\mathsf{Grp}$：群を対象とし、群準同形を射とする圏。
- $\mathsf{Ring}$：(単位元をもつ可換とは限らない)環を対象とし、環準同形を射とする圏。
- $\mathsf{Field}$：体を対象とし、体準同形を射とする圏。


### poset
poset = partially ordered set (半順序集合) から圏を作ることができる。まずposetについて確認する。集合 $P$ とその上の二項関係 $\leq$ であって、以下の条件を満たすものを**poset**と呼ぶ：

- 反射律：任意の $x \in P$ に対して、$x \leq x$ が成り立つ。
- 推移律：任意の $x, y, z \in P$ に対して、$x \leq y$ かつ $y \leq z$ ならば $x \leq z$ が成り立つ。
- 反対称律：任意の $x, y \in P$ に対して、$x \leq y$ かつ $y \leq x$ ならば $x = y$ が成り立つ。

上でたくさん紹介したのと同様に、posetと、順序を保つ写像からなる圏 $\mathsf{Poset}$ が考えられる。

一方、それとは別に、一つのposet $(P, \leq)$ を決めると、以下のように対応する圏 $\mathsf{P}$ が得られる：

- $\mathsf{P}$ の対象は、集合 $P$ とする。
- $x, y \in P$ に対して、$x$ から $y$ への射を以下のように定める：
    - $x \leq y$ であるときは、$x$ から $y$ への射がただ一つ存在する。
    - そうでないときは、$x$ から $y$ への射は存在しない。

推移律により、射の合成が定まる。
反射律により、$x$ から $x$ への射はただ一つ存在する。これが恒等射である。

(反対称律は圏の条件を満たすためには不要らしい)

!!! example "例"
    posetが定める圏の例を紹介する。

    集合論的な自然数の構成では、$n = \{0, 1, 2, \ldots, n-1\}$ とするのであった。最初のほうを見ると、

    - $0 = \{\}$ (空集合)
    - $1 = \{0\}$ (ちょうど一つの元 $0$ を持つ集合)
    - $2 = \{0, 1\}$
    - $3 = \{0, 1, 2\}$
    - $\cdots$
    
    となる。これらはすべて、普通の順序 $\leq$ によってposetになる。そこで、これらに対応する圏を作ることができる。

    一番簡単なのは、$0$ に対応する圏 $\mathsf{0}$ である。これは、対象も射ももたない圏である。

    $1$ に対応する圏を $\mathsf{1}$ と書く。これは、一つの対象 $0$ と、一つの射 $0 \to 0$ からなる圏である。

    $2$ に対応する圏を $\mathsf{2}$ と書く。これは、二つの対象 $0, 1$ と、三つの射 $0 \to 0, 0 \to 1, 1 \to 1$ からなる圏である。




### 群
群 $G$ を一つ決めたとき、それを用いて圏 $\mathsf{B}G$ を作ることができる。具体的には、

- $\mathsf{B}G$ はただ一つの対象 $\ast$ をもつ。
- $\ast$ から $\ast$ への射の全体は、$G$ であるとする。
    - 合成は、$G$ の演算により定める。


ほかにもいっぱいあるので、思いついたら追記します。(もっとシンプルな例もたくさんあると嬉しい)